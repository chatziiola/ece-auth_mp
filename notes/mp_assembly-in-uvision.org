#+TITLE: Understanding Assembly Integration
#+DESCRIPTION: How to include assembly snippets within a uvision project
#+AUTHOR: Lamprinos Chatziioannou
#+FILETAGS:

* Summary
1. Create assembly file
2. Properly populate assembly file
3. In c code, add that function as ~extern~

* Details
In assembly you should have the following structure, (straight out of
the presentation - slide 30)
#+NAME: Assembly file 
#+begin_src asm
	.global myadd
	.p2align 2 // TODO
	.type myadd,%function // crucial

myadd:		// funciton entrypoint
	.fnstart
	// content
	.fnend

#+end_src



* Lab Configuration
Having started just a simple project - what is there for us to do?

** Setting Up UART
- Not included here, check [[file:mp_understanding-uart.org][Understanding UART]]

** Setting Up printf/scanf
For debugging processes:
- Check slides 31

Steps:
1. Go to "Manage RTE"
2. Fix IO/{STDERR,STDIN,STDOUT} to selected and ITM
3. Debug: Trace Enable and CoreClock 16MHz
   - Go from debugger settings
4. Debug: ITM Port 0
5. View - Serial Windows - Debug Viewer

** Sources:
- [[file:mp_lab0_setting-up-keil.PDF][Keil Configuration]] Guide, by Athanasiadis Aggelos, Karanasos Dimitrios
  - Interesting slides:
    - 21: UnderReset and St-Link Debugger
    - 30: Including assembly

* Resources
- https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html#Using-Assembly-Language-with-C
- [[file:arm_compiler-v6.pdf][Compiler V6]]

